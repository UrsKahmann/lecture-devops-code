apiVersion: 'networking.k8s.io/v1'
kind: 'Ingress'
metadata:
  name: 'etherpad-ingress'
  annotations:
    # NOTE: enable session affinity to make websockets work for deployments with replica > 1
    nginx.ingress.kubernetes.io/affinity: 'cookie'
    nginx.ingress.kubernetes.io/session-cookie-name: 'express_sid'
spec:
  rules:
  - host: etherpad.${NS_NAME}.141.64.6.10.edu.ris.beuth-hochschule.de
    http:
      paths:
      - pathType: ImplementationSpecific
        path: '/'
        backend:
          service:
            name: etherpad-service
            port:
              number: 80
